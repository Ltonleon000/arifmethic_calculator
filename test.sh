#!/bin/bash
set -e

echo "===== Запуск тестов распределенного калькулятора ====="

echo "Запуск тестов для пакета calculator (парсер)..."
cd internal/calculator
go test -v
cd ../..

echo "Запуск тестов для пакета models (структуры данных)..."
cd internal/models
go test -v
cd ../..

echo "Запуск тестов для пакета api (обработчики API)..."
cd internal/api
go test -v
cd ../..

echo "Запуск тестов для cmd пакетов..."
go test ./cmd/...

# Тесты корневого пакета могут не проходить из-за конфликта main в разных файлах
# Это нормально для нашего проекта
echo "===== Все тесты успешно завершены! ====="
